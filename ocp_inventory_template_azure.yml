---
  - name: Generate Openshift Container Platform installer inventory file

    hosts: localhost
    gather_facts: yes

    vars:
      template: 'inventory-glusterfs.j2' 
      
      OCP_MASTERS: ['master.ocpcloud.local']
      OCP_INFRA_NODES: ['infra1.ocpcloud.local', 'infra2.ocpcloud.local', 'infra3.ocpcloud.local']
      OCP_APP_NODES: 
        - { host: 'appnode1.ocpcloud.local', region: 'dev' }
        - { host: 'appnode2.ocpcloud.local', region: 'dev' }
        - { host: 'appnode3.ocpcloud.local', region: 'test' }
      LB: "no"
      OCP_LB_NODES: []
      #if you set CNS="yes" you need to specify 3 infra nodes and 3 app nodes above
      CNS: "no"
      
      OCP_SSH_USER: azure-user
      OCP_SSH_BECOME: true
      
      OCP_IPA: "yes"
      OCP_IPA_HOSTNAME: ipa.ocpcloud.local
      OCP_IPA_DOMAIN: dc=ocpcloud,dc=local
      OCP_IPA_PASSWORD: "{{ lookup('env','IPA_PASSWORD') }}"
    
      OCP_DEFAULT_SUBDOMAIN: cloudapps.ocpcloud.local
      OCP_MASTER_HOSTNAME: master.ocpcloud.local
      OCP_MASTER_PUBLIC_HOSTNAME: master.ocpcloud.com
   
      HTTP_PROXY: "no"
      OCP_HTTP_PROXY:
      OCP_HTTPS_PROXY: 
      OCP_NO_PROXY:

      AZURE: "yes"

      AWS: "no"
      
      OSP: "no"
      
    tasks:
      - name: Proces inventory template file
        template:
          src: "{{ template }}"
          dest: ./inventory-azure-{{ ansible_date_time.epoch }}
        register: output

      - debug:
          var: output.dest  

