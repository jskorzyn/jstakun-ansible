[OSEv3:children]
masters
etcd
nodes
glusterfs_registry
glusterfs

[masters]
{% for item in OCP_MASTERS %}
{{ item }}
{% endfor %}

[etcd]
{% for item in OCP_MASTERS %}
{{ item }}
{% endfor %}

[nodes]
{% for item in OCP_MASTERS %}
{{ item }} openshift_node_labels="{'region': 'master', 'zone':'default'}" openshift_schedulable=False
{% endfor %}
{% for item in OCP_INFRA_NODES %}
{{ item }} openshift_node_labels="{'region': 'infra', 'zone':'default'}" node=True storage=True openshift_schedulable=True
{% endfor %}
{% for item in OCP_APP_NODES %}
{{ item }} openshift_node_labels="{'region': 'dev', 'zone':'default', 'node':'{{ loop.index }}'}" node=True storage=True openshift_schedulable=True
{% endfor %}

[glusterfs_registry]
{% for item in OCP_INFRA_NODES %}
{{ item }} glusterfs_devices="[ '/dev/xvdc' ]"
{% endfor %}

[glusterfs]
{% for item in OCP_INFRA_NODES %}
{{ item }} glusterfs_devices="[ '/dev/xvdc' ]"
{% endfor %}

[OSEv3:vars]

# ssh connection

ansible_ssh_user={{ OCP_SSH_USER }}
ansible_become=true 

# Debug level for all OpenShift components (Defaults to 2)

debug_level=2

# security

openshift_master_identity_providers=[{'name': 'idm', 'challenge': 'true', 'login': 'true', 'kind': 'LDAPPasswordIdentityProvider', 'attributes': {'id': ['dn'], 'email': ['mail'], 'name': ['cn'], 'preferredUsername': ['uid']}, 'bindDN': 'uid=admin,cn=users,cn=accounts,{{ OCP_IPA_DOMAIN }}', 'bindPassword': '{{ OCP_IPA_PASSWORD }}', 'ca': '/etc/origin/master/ipaÂ­.crt', 'insecure': 'false', 'url': 'ldap://OCP_IPA_HOSTNAME/cn=users,cn=accounts,{{ OCP_IPA_DOMAIN }}?uid?sub?(memberOf=cn=ocp-users,cn=groups,cn=accounts,OCP_IPA_DOMAIN)'}]

#passwords are manager1
#openshift_master_identity_providers=[{'name': 'htpasswd_auth', 'login': 'true', 'challenge': 'true', 'kind': 'HTPasswdPasswordIdentityProvider', 'filename': '/etc/origin/master/htpasswd'}]
openshift_master_htpasswd_users={'admin':'$apr1$AFC0UGRq$..GYeSig63Bv4e7zzzfFD/','developer':'$apr1$AFC0UGRq$..GYeSig63Bv4e7zzzfFD/', 'tester':'$apr1$AFC0UGRq$..GYeSig63Bv4e7zzzfFD/'}

# Enable service catalog

#openshift_enable_service_catalog=true

# OpenShift deployment parameters

deployment_type=openshift-enterprise
openshift_disable_check=disk_availability,memory_availability

# Wildcard application hostname suffix

openshift_master_default_subdomain={{ OCP_DEFAULT_SUBDOMAIN }}

# Developer access to WebUI and API

openshift_master_cluster_hostname={{ OCP_MASTER_HOSTNAME }}
openshift_master_cluster_public_hostname={{ OCP_MASTER_PUBLIC_HOSTNAME }}
openshift_master_cluster_method=native

# OpenShift Networking

os_sdn_network_plugin_name='redhat/openshift-ovs-multitenant'

# AWS

openshift_cloudprovider_kind=aws
openshift_cloudprovider_aws_access_key={{ AWS_KEY }}
openshift_cloudprovider_aws_secret_key={{ AWS_SECRET }}

# HTTP proxy settings

#openshift_http_proxy={{ OCP_HTTP_PROXY }}
#openshift_https_proxy={{ OCP_HTTPS_PROXY }}
#comma separated list of host names or wildcard host names
#openshift_no_proxy={{ OCP_NO_PROXY }}
#openshift_builddefaults_git_http_proxy={{ OCP_HTTP_PROXY }}
#openshift_builddefaults_git_https_proxy={{ OCP_HTTPS_PROXY }}

# Enable cockpit
osm_use_cockpit=true

# Routers

openshift_hosted_router_selector='region=infra'
openshift_hosted_router_replicas=3

# Registry

openshift_hosted_registry_storage_kind=glusterfs
openshift_hosted_registry_selector='region=infra'
openshift_hosted_registry_replicas=3

# Logging

openshift_hosted_logging_deploy=true
openshift_hosted_logging_storage_kind=dynamic
openshift_logging_es_nodeselector={"region":"infra"}
openshift_logging_kibana_nodeselector={"region":"infra"}
openshift_logging_curator_nodeselector={"region":"infra"}

# Metrics

openshift_hosted_metrics_deploy=true
openshift_metrics_cassandra_storage_type=dynamic
openshift_metrics_hawkular_nodeselector={"region":"infra"}
openshift_metrics_cassandra_nodeselector={"region":"infra"}
openshift_metrics_heapster_nodeselector={"region":"infra"}

